# 爬虫

## B站爬虫

## 1. **视频数据**

- **基础信息**

  - 标题、AV号/BV号、封面图、分区标签
  - 播放量、弹幕量、收藏量、投币量、分享量
  - 上传时间、视频时长、分辨率信息

- **高级数据**

  - 视频标签（TAG）及热度
  - 关联推荐视频列表
  - 视频字幕（CC字幕/自动生成字幕）

- **技术要点**

  python

  复制

  ```
  # 示例：获取视频基本信息API（需处理反爬）
  API_VIDEO_INFO = "https://api.bilibili.com/x/web-interface/view?bvid={bv}"
  ```

## 2. **用户数据**

- **基础资料**

  - UID、昵称、头像、个性签名
  - 等级、认证信息、会员状态
  - 粉丝数、关注数、获赞数

- **行为数据**

  - 投稿视频列表（需处理分页）
  - 收藏夹内容（需登录Cookie）
  - 历史观看记录（需登录且加密）

- **技术要点**

  python

  复制

  ```
  # 用户投稿视频分页参数
  params = {
      "mid": uid,
      "ps": 30,  # 每页数量
      "pn": page  # 页码
  }
  ```

## 3. **评论与弹幕**

- **评论数据**

  - 楼层评论（主评+回复）
  - 点赞数、回复数、发送时间
  - 用户等级标识、会员图标

- **弹幕数据**

  - 弹幕内容、发送时间、字体颜色
  - 出现时间点（视频时间轴）
  - 发送者哈希标识（非真实UID）

- **技术要点**

  python

  复制

  ```
  # 弹幕XML接口示例
  DANMAKU_API = "https://api.bilibili.com/x/v1/dm/list.so?oid={cid}"
  ```

## 4. **直播数据**

- **直播间信息**
  - 房间号、标题、封面、分类标签
  - 人气值、在线观众数、弹幕互动量
  - 主播信息（关联用户数据）
- **实时数据**
  - 弹幕流（WebSocket协议）
  - 礼物排行榜
  - 直播间状态（是否开播）